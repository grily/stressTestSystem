/* Created by smooth00 , https://smooth.blog.csdn.net/ */
/* Do not tamper with the source code */
(function(){var d={};this.tmpl=function r(c,f){c=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):d[c]=d[c]||r(document.getElementById(c).innerHTML);return f?c(f):c}})();
function getPCPairs(d){for(var e=[],c=0;c<d.children.length-1;c+=2){var f=[];f[0]=d.children[c];f[1]=d.children[c+1];e.push(f)}return e}function nodeAsXML(d){d=d.innerHTML;return d="&#13;&#10;"+d.replace(/^\n+|\n+$/g,"")}function VariablesAsXML(d,e){var c="";d=(new XPathEvaluator).evaluate(d,e,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);0<d.snapshotLength&&(c=d.snapshotItem(0).innerHTML,c="&#13;&#10;"+c.replace(/^\n+|\n+$/g,""));return c}
function changeLoops(d,e){e.value="-1"==d?e.value.replace(/stringProp/g,"intProp"):e.value.replace(/intProp/g,"stringProp");var c=e.value.match(/name='LoopController.loops'>(\S*)</);e.value=e.value.replace(c[0],"name='LoopController.loops'>"+d+"<");c[1]!=d&&(d=document.createEvent("HTMLEvents"),d.initEvent("change",!1,!0),e.dispatchEvent(d))}
(function(){function d(a,b,h,c){function e(){(function(a){if(""==b.innerHTML)b.innerHTML=a;else{var c=b.getElementsByClassName("nodecontents");if(c&&c[0]){c=c[0];var n=document.createElement("div");n.innerHTML=a;b.replaceChild(n,c)}else b.innerHTML=a}})(function(){var c=function(a,b,c){function g(a,b,c){var g=function(a){switch(a){case "string":return{getValue:function(a){return a.stringValue},type:XPathResult.STRING_TYPE};case "boolean":return{getValue:function(a){return"true"==a.stringValue?!0:
!1},type:XPathResult.STRING_TYPE};case "number":case "time":return{getValue:function(a){return a.numberValue},type:XPathResult.NUMBER_TYPE}}}(b.type||"string");return""==b.path?"":g.getValue(c.evaluate(b.path,a,null,g.type,null))}function d(a){return"function"==typeof this[a]}function n(a,b){var c=a.get;return a.path&&"VariablesAsXML"==c?this[c](a.path,b):this[c](b)}var h={},l;for(l in b){var e=b[l];e.get?d(e.get)&&(h[l]=n(e,a)):e.path&&(h[l]=g(a,e,c))}return h}(a,m.edit.attrs,h),d=u[t];c.vid=b.id;
return d?tmpl(d,c):""}());(function(){var c=b.getElementsByTagName("form");c&&c[0]&&(c[0].model=a)})()}function k(){(function(){function a(a){a=m.edit&&m.edit.attrs?m.edit.attrs[a.name]:void 0;a||(a=m.edit);(a=a.type)||(a="string");return a}function c(a,b){if(b=v[b])a.onfocus=b.onfocus,a.onchange=b.onchange}for(var d=b.getElementsByTagName("input"),l=0;l<d.length;l++){var g=d[l],h=a(g);c(g,h)}d=b.getElementsByTagName("textarea");for(l=0;l<d.length;l++)g=d[l],h=a(g),c(g,h)})();(function(){function a(a){var b=
a.srcElement;b||(b=a.target);d(b.parentElement.parentElement.parentElement.getElementsByClassName("body")[0])}function c(a){var b=a.srcElement;b||(b=a.target);d(b.nextElementSibling.nextElementSibling);b.innerHTML="^"==b.innerHTML.trim()?" > ":" ^ "}function d(a){a.classList.contains("expanded")?(a.classList.remove("expanded"),a.classList.add("collapsed")):(a.classList.remove("collapsed"),a.classList.add("expanded"))}for(var h=b.getElementsByClassName("toggleAttrs"),g=0;g<h.length;g++){var e=h[g];
e.onclick=a}h=b.getElementsByClassName("toggleChildren");for(g=0;g<h.length;g++)e=h[g],e.onclick=c})()}function f(){(function(e){for(var n=a.children.length,k=0;k<n;k++){var l=a.children[k];if(!l.attributes.name||"Argument.metadata"!=l.attributes.name.nodeValue){var g=document.getElementById(b.id+"_child_"+k);g||(g=document.createElement("div"),e.appendChild(g));d(l,g,h,++c)}}})(function(){var c;(c=b.getElementsByClassName(a.nodeName+"_children"))&&c[0]?c=c[0]:(c=document.createElement("div"),c.id=
a.nodeName+"_children",c.setAttribute("class",a.nodeName+"_children"),b.appendChild(c));return c}())}b.id="jmx_"+c;var t=r(a),m=p[t];m&&(e(),k(),(m.edit.processChildren||0!=b.getElementsByClassName(a.nodeName+"_children").length)&&f())}function e(a,b){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var c="jmx"==a.slice(-3)?!0:!1;c?xmlhttp.open("GET",a+"?ran="+Math.random(),!1):xmlhttp.open("GET",a,!1);b?xmlhttp.overrideMimeType("text/plain; charset=x-user-defined"):
c&&xmlhttp.overrideMimeType("text/xml");xmlhttp.send();return xmlhttp}function c(a){var b=a.srcElement;b||(b=a.target);f(b,b.value)}function f(a,b){function c(a,b){b=function(a){if(window.DOMParser){var b=new DOMParser;b=b.parseFromString(a,"text/xml")}else b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a);return b}("<root>"+b.value+"</root>");(function(a){for(;a.firstChild;)a.removeChild(a.firstChild)})(a);(function(a,b){for(b=b.firstChild;b.firstChild;)a.appendChild(b.firstChild)})(a,
b)}var d=a.form.model,e=r(d),k=p[e];e=".";var f=k.edit.attrs[a.name]?a.name:"value";if(f=k.edit.attrs[f]?k.edit.attrs[f]:!1){if(e=f.path,f.readOnly)return}else if("GENERIC"==k.edit.view)if(k=d.children[0],"collectionProp"==k.nodeName){f=k.children;for(var q=0;q<f.length;q++)for(var m=f[q],n=0;n<m.children.length;n++)m.children[n].attributes.name.value==a.name&&m.attributes.name.value==a.outerHTML.match('/(?<=title=").*?(?=">)/')&&(e=k.nodeName+"/"+m.nodeName+"[@name='"+m.attributes.name.value+"']/"+
m.children[n].nodeName+"[@name='"+a.name+"']")}else e=k.nodeName+"[@name='"+k.attributes.name.value+"']";if(a=(new XPathEvaluator).evaluate(e,d,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null).iterateNext())"object"==typeof b?c(a,b):0<a.childNodes.length?a.childNodes[0].nodeValue=b:2==a.nodeType?a.nodeValue=b:a.appendChild(document.createTextNode(b))}function r(a){return p[a.nodeName]?a.nodeName:a.attributes.guiclass&&p[a.attributes.guiclass.value]?a.attributes.guiclass.value:"DEFAULT"}var q={},
p={},u={},v={string:{onchange:c},"boolean":{onchange:function(a){var b=a.srcElement;b||(b=a.target);f(b,b.checked?"true":"false")}},number:{onchange:c},time:{onchange:c},xml:{onchange:function(a){var b=a.srcElement;b||(b=a.target);f(b,b)}}};this.JMX={init:function(a){(function(a){if(a)q=a;else{a=e("lib/config.json",!0);try{q=JSON.parse(a.responseText)}catch(h){throw h;}}a=e("lib/jmxelements.json",!0);try{p=JSON.parse(a.responseText)}catch(h){throw h;}})(a);(function(){for(var a in p){var c=p[a];a:{var d=
void 0,f=void 0,k=a;if(void 0!=c.edit.view){if(0==c.edit.view)break a;"GENERIC"!=c.edit.view&&"GENDEFAULT"!=c.edit.view?f=c.edit.view:d=c.edit.view}else d=k;f||(f=e("tmpl/"+d+".tmpl",!0).responseText);u[k]=f}}})()},loadAndEdit:function(a,b){b=e(b).responseXML;for(a=document.getElementById(a);a.firstChild;)a.removeChild(a.firstChild);var c=document.createElement("div");a.appendChild(c);d(b.documentElement,c,b,0);return b},save:function(a,b,c){if(0==q.demo)xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:
new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.open("POST",a+"?fileName="+encodeURIComponent(b),!1),a=localStorage.getItem("token"),xmlhttp.setRequestHeader("token",a),xmlhttp.setRequestHeader("Content-Type","application/json;charset=UTF-8"),xmlhttp.send(c),c=xmlhttp.response,c.match(RegExp(/success/))?alert("\u4fdd\u5b58\u6210\u529f!"):alert(c);else throw"Unable to save due to demo mode being set.";}}})();